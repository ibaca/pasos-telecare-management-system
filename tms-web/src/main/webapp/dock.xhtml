<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ppctu="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
  <h:head>
    <title>Telecare Alarm Center</title>
    <link href="#{request.contextPath}/resources/img/favicon.ico" rel="shortcut icon" />    
  <h:outputStylesheet name="css/mainstyle.css"/>
  <script src="http://maps.google.com/maps/api/js?sensor=true"
type="text/javascript"></script>
  </h:head>
  <h:body>
      <div id="head">
            <div class="contenedor960">
                <span> Telecare Alarm Center </span>
            </div> <!-- fin contenedor960 -->
        </div> <!-- fin menu -->
        
        
    <div class="contenedor960">
        
        <ppctu:fieldset id="container" legend="Telecare Alarm Center: Administration"> 
        <h:panelGroup rendered="#{tableBean.show}" >
            
            <h:form> 
                <ppctu:dataList value="#{tableBean.alerts}" var="alert"  
                    paginator="true" rows="5" effectSpeed="fast"  
                    paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
                    rowsPerPageTemplate="5,10,15">  

                    <f:facet name="header">  
                        Active Alerts  
                    </f:facet>  

                    <ppctu:column>  
                        <ppctu:commandLink update=":form:alertDetail" oncomplete="alertDialog.show()" title="View Detail" style="width: 30px;display: inline-block;">  
                            <ppctu:graphicImage value="./resources/img/search.png"/>   
                            <f:setPropertyActionListener value="#{alert}" target="#{tableBean.selectedAlert}" />  
                        </ppctu:commandLink>

                        <h:outputText value="#{alert.type}" style="width:100px;white-space:nowrap;display:inline-block;" />
                        <h:outputText value="#{alert.priority}" style="width:100px;white-space:nowrap;display:inline-block;" />
                        <h:outputText value="#{alert.affected.simpleName}" style="width:100px;white-space:nowrap;display:inline-block;" />
                        <h:outputText value="#{alert.cause}" style="width:275px;white-space:nowrap;display:inline-block;overflow: hidden;margin-right:5px;" />
                        <h:outputText value="#{alert.created}" style="width:198px;white-space:nowrap;display:inline-block;" />
                        
                        <ppctu:commandLink>
                            <ppctu:commandButton value=">>" actionListener="#{tableBean.hide}" update="container" />
                            <f:setPropertyActionListener value="#{alert}" target="#{tableBean.selectedAlert}" /> 
                        </ppctu:commandLink>
                    </ppctu:column>  
                </ppctu:dataList>  


                <ppctu:dialog header="alert Detail" widgetVar="alertDialog" modal="true" showEffect="fade">  
                    <ppctu:outputPanel id="alertDetail" style="text-align:center;" layout="block">  
                        <ppctu:graphicImage value="/images/alerts/#{tableBean.selectedAlert.affected}.jpg"/>  
                        <h:panelGrid  columns="2" cellpadding="5">  
                            <h:outputLabel for="name" value="Name: " />  
                            <h:outputText id="name" value="#{tableBean.selectedAlert.affected.firstName}, #{tableBean.selectedAlert.affected.lastName}" />  

                            <h:outputLabel for="email" value="E-mail: " />  
                            <h:outputText id="email" value="#{tableBean.selectedAlert.affected.email}" />  

                            <h:outputLabel for="number" value="Mobile Number: " />  
                            <h:outputText id="number" value="#{tableBean.selectedAlert.affected.mobileNumber}"/>  
                        </h:panelGrid>  
                    </ppctu:outputPanel>  
                </ppctu:dialog> 

            </h:form> 
        </h:panelGroup> <!-- END OF THE FIRST PANEL GROUP -->
         
        <h:panelGroup rendered="#{!tableBean.show}">
            <h:form>
            <ppctu:tabView id="tabView">  

                <ppctu:tab id="tab1" title="About">  
                     <h:panelGrid columns="1" cellpadding="10">   
                        <h:outputText value="First Name: #{tableBean.selectedAlert.affected.firstName}" />
                        <h:outputText value="Last Name: #{tableBean.selectedAlert.affected.lastName}" />
                        <h:outputText value="Simple Name: #{tableBean.selectedAlert.affected.simpleName}" />
                        <h:outputText value="Email: #{tableBean.selectedAlert.affected.email}" />
                        <h:outputText value="Id: #{tableBean.selectedAlert.affected.id}" />
                    </h:panelGrid>  
                </ppctu:tab>  

                <ppctu:tab id="tab2" title="Alert">  
                     <h:panelGrid columns="1" cellpadding="10">   
                         <h:outputText value="Cause: #{tableBean.selectedAlert.cause}" />
                         <h:outputText value="Created: #{tableBean.selectedAlert.created}" />
                         <h:outputText value="Priority: #{tableBean.selectedAlert.priority}" />
                         <h:outputText value="Type: #{tableBean.selectedAlert.type}" />
                    </h:panelGrid>  
                </ppctu:tab>  

                <ppctu:tab id="tab3" title="Device">  
                    <h:panelGrid columns="1" cellpadding="10">  
                        <h:outputText value="Number: #{tableBean.selectedAlert.origin.mobileNumber}" />
                        <h:outputText value="Battery: #{tableBean.selectedAlert.origin.batery}" />
                        <h:outputText value="SimCard: #{tableBean.selectedAlert.origin.simCard}" />
                        <h:outputText value="Temperature: #{tableBean.selectedAlert.origin.temperature}" />
                    </h:panelGrid>  
                </ppctu:tab>
                
                <ppctu:tab id="tab4" title="Contacs">  
                   <ppctu:dataList value="#{tableBean.contacsOfSelectedAlert}" var="person" itemType="disc">  
                        #{person.firstName}, #{person.lastName} : #{person.mobileNumber}  
                    </ppctu:dataList>
                </ppctu:tab>  
            </ppctu:tabView>  
            <br/><br/>
    
              
                <center>
                    
                    <ppctu:gmap center="36.890257,30.707417" zoom="13" type="HYBRID" model="#{tableBean.advancedModel}" style="width:600px;height:400px" />  
                  <!--      <ppctu:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}"/>
                        
                    <ppctu:gmapInfoWindow>  
                        <ppctu:outputPanel style="text-align:center;display:block;margin:auto:">  
                                <ppctu:graphicImage value="./resources/img/dock/#{mapBean.marker.data}" height="150"/>  
                                <br/>  
                                <h:outputText value="#{mapBean.marker.title}" />  
                        </ppctu:outputPanel>  
                    </ppctu:gmapInfoWindow>
                    </ppctu:gmap></center> -->
                <br/><br/>
                <h:outputText value="Intervention: "/> 
                <ppctu:inputTextarea value="#{tableBean.intervention}"  required="true"/>
                <br/>
                <ppctu:commandButton value="Done" actionListener="#{tableBean.hide}" update="container"/></center>
            </h:form>
        </h:panelGroup>
        <ppctu:growl id="growl" showDetail="true"/>
        </ppctu:fieldset><!-- END OF THE SECOND PANEL GROUP -->
    </div> <!-- fin contenedor960 -->  
            
<ppctu:dock>  
    <ppctu:menuitem value="Home" icon="./resources/img/dock/home.png" url="./dock.xhtml"/>  
    <ppctu:menuitem value="Email" icon="./resources/img/dock/email.png" url="#"/>  
    <ppctu:menuitem value="Chat" icon="./resources/img/dock/portfolio.png" url="./chat.xhtml"/>  
    <ppctu:menuitem value="Chart" icon="./resources/img/dock/chart.png" url="./chart.xhtml"/>  
    <ppctu:menuitem value="History" icon="./resources/img/dock/history.png" url="#"/>  
</ppctu:dock> 
</h:body>


</html>

